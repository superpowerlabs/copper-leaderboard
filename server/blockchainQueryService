const Web3 = require("web3");
require("dotenv").config();
const web3 = new Web3(
    "wss://mainnet.infura.io/ws/v3/" + process.env.INFURA_KEY
);
const ERC20abi = require("./ERC20abi.json");
const CONTRACT_ADDRESS = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2";

const queryService = {
    getContract() {
        const contract = new web3.eth.Contract(ERC20abi, CONTRACT_ADDRESS);
        const START_BLOCK = 7700000;
        const END_BLOCK = 7700100;
        contract
            .getPastEvents("Transfer", {
                fromBlock: START_BLOCK,
                toBlock: END_BLOCK, // You can also specify 'latest'
            })
            .then((events) => console.log(events))
            .catch((err) => console.error(err));
    },
};
module.exports = queryService;
